<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: USB::InputOutputFeature</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">USB::InputOutputFeature</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/hid_cpp.html">
                hid.cpp
                </a>
        <br />
                <a href="../../files/libusb_rb.html">
                libusb.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
This class represents the Input, Output, or Feature mainitems within a <a
href="../USB.html">USB</a> <a href="Report.html">Report</a> descriptor.
They determine the details of a report&#8217;s structure and content. There
is usually not a lot of need to use this class directly - much happens
implictly through the <a href="ReportData.html">ReportData</a> object
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000036">all_usages</a>&nbsp;&nbsp;
      <a href="#M000044">array?</a>&nbsp;&nbsp;
      <a href="#M000043">flag_set?</a>&nbsp;&nbsp;
      <a href="#M000037">length</a>&nbsp;&nbsp;
      <a href="#M000038">report_count</a>&nbsp;&nbsp;
      <a href="#M000039">report_size</a>&nbsp;&nbsp;
      <a href="#M000041">set_usages_for_data</a>&nbsp;&nbsp;
      <a href="#M000040">usage_for_field</a>&nbsp;&nbsp;
      <a href="#M000042">values_for_data</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <span class="method-name">all_usages</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
Returns all usages the device is capable of returning
</p>
        </div>
      </div>

      <div id="method-M000044" class="method-detail">
        <a name="M000044"></a>

        <div class="method-heading">
          <a href="#M000044" class="method-signature">
          <span class="method-name">array?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the data item is a array item. false if it is a variable
item
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000044-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000044-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 547</span>
547:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">array?</span>
548:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">flag_set?</span>(<span class="ruby-value str">&quot;InputOutputFeature::ARRAY&quot;</span>)
549:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000043" class="method-detail">
        <a name="M000043"></a>

        <div class="method-heading">
          <a href="#M000043" class="method-signature">
          <span class="method-name">flag_set?</span><span class="method-args">(flag_string)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the device has one of the following characteriscs (passed
as a string:
</p>
<pre>
  InputOutputFeature::DATA, InputOutputFeature::CONSTANT,
  InputOutputFeature::ARRAY, InputOutputFeature::VARIABLE,
  InputOutputFeature::ABSOLUTE, InputOutputFeature::RELATIVE,
  InputOutputFeature::NO_WRAP, InputOutputFeature::WRAP,
  InputOutputFeature::LINEAR, InputOutputFeature::NONLINEAR,
  InputOutputFeature::PREFERRED_STATE, InputOutputFeature::NO_PREFERRED_STAT,
  InputOutputFeature::NULL_STATE, InputOutputFeature::NO_NULL_STATE,
  InputOutputFeature::NONVOLATILE, InputOutputFeature::VOLATILE,
  InputOutputFeature::BIT_FIELD, InputOutputFeature::BUFFERED_BYTES,
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000043-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000043-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 541</span>
541:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">flag_set?</span>(<span class="ruby-identifier">flag_string</span>)
542:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">flag_set_internal?</span>(<span class="ruby-constant">USB</span><span class="ruby-operator">::</span><span class="ruby-constant">Device</span><span class="ruby-operator">::</span><span class="ruby-identifier">get_value_for</span>(<span class="ruby-value str">&quot;data_item_flags&quot;</span>, <span class="ruby-identifier">flag_string</span>))
543:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <span class="method-name">length</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
The total length of this input/output/feature in a reportdatagram in bits
</p>
        </div>
      </div>

      <div id="method-M000038" class="method-detail">
        <a name="M000038"></a>

        <div class="method-heading">
          <span class="method-name">report_count</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
The number of items in this report. For a array field, this limits the
number of items that can be reported at once. For a variable field this
determines the number of variables
</p>
        </div>
      </div>

      <div id="method-M000039" class="method-detail">
        <a name="M000039"></a>

        <div class="method-heading">
          <span class="method-name">report_size</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
The bit length of an individual item in this Input, Output or Feature. The
length is this times the <a
href="InputOutputFeature.html#M000038">report_count</a>
</p>
        </div>
      </div>

      <div id="method-M000041" class="method-detail">
        <a name="M000041"></a>

        <div class="method-heading">
          <a href="#M000041" class="method-signature">
          <span class="method-name">set_usages_for_data</span><span class="method-args">(binary_string)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of pairs [<a href="Usage.html">Usage</a>, value]
corresponding to the binary string that is passed. Note that for array
items, all possible usages might not be in this resultant list
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000041-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000041-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 509</span>
509:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_usages_for_data</span>(<span class="ruby-identifier">binary_string</span>)
510:       <span class="ruby-identifier">result</span> = []
511:       <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>
512:       <span class="ruby-identifier">values_for_data</span>(<span class="ruby-identifier">binary_string</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
513:         <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">array?</span>)
514:           <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">usage_for_field</span>(<span class="ruby-identifier">value</span>), <span class="ruby-value">1</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
515:         <span class="ruby-keyword kw">else</span>
516:           <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">usage_for_field</span>(<span class="ruby-identifier">i</span>), <span class="ruby-identifier">value</span>]
517:         <span class="ruby-keyword kw">end</span>
518:         <span class="ruby-identifier">i</span> = <span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
519:       }
520:      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
521:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000040" class="method-detail">
        <a name="M000040"></a>

        <div class="method-heading">
          <span class="method-name">usage_for_field</span><span class="method-args">(p1)</span>
        </div>
      
        <div class="method-description">
          <p>
This method takes an int and returns the usage corresponding to the ith
field in the report. For variable items this is the ith entry in the
datagram. For array items it is the usage for the value i in the array
return
</p>
        </div>
      </div>

      <div id="method-M000042" class="method-detail">
        <a name="M000042"></a>

        <div class="method-heading">
          <a href="#M000042" class="method-signature">
          <span class="method-name">values_for_data</span><span class="method-args">(binary_string)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of numbers corresponding to the integer values of each
seperate segment of the input. Negative integers are not currently
supported (yet)
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000042-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000042-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 526</span>
526:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">values_for_data</span>(<span class="ruby-identifier">binary_string</span>)
527:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">report_count</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">binary_string</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">*</span><span class="ruby-identifier">report_size</span>, <span class="ruby-identifier">report_size</span>].<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-value">2</span>) }
528:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>