<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: USB::ReportData</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">USB::ReportData</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/libusb_rb.html">
                libusb.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Represents a single data report sent from a device to the host
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000103">data_part</a>&nbsp;&nbsp;
      <a href="#M000106">get_usage_value</a>&nbsp;&nbsp;
      <a href="#M000100">new</a>&nbsp;&nbsp;
      <a href="#M000104">report</a>&nbsp;&nbsp;
      <a href="#M000102">report_id</a>&nbsp;&nbsp;
      <a href="#M000101">report_id?</a>&nbsp;&nbsp;
      <a href="#M000105">set_usages</a>&nbsp;&nbsp;
      <a href="#M000108">to_s</a>&nbsp;&nbsp;
      <a href="#M000107">values</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000100" class="method-detail">
        <a name="M000100"></a>

        <div class="method-heading">
          <a href="#M000100" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(data, descriptor)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Takes a character string of input data and the report descriptor
corresponding to the device that created it
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000100-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000100-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 557</span>
557:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">data</span>, <span class="ruby-identifier">descriptor</span>)
558:       <span class="ruby-ivar">@binary_string</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;B*&quot;</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">reverse</span>;
559:       <span class="ruby-ivar">@descriptor</span> = <span class="ruby-identifier">descriptor</span>
560:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000103" class="method-detail">
        <a name="M000103"></a>

        <div class="method-heading">
          <a href="#M000103" class="method-signature">
          <span class="method-name">data_part</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Retruns a binary string corresponding to the data portion of the packet
(without the <a href="ReportData.html#M000102">report_id</a>)
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000103-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000103-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 575</span>
575:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">data_part</span>
576:       <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">report_id?</span>)
577:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@binary_string</span>[<span class="ruby-value">8</span><span class="ruby-operator">..</span><span class="ruby-ivar">@binary_string</span>.<span class="ruby-identifier">size</span>]
578:       <span class="ruby-keyword kw">else</span>
579:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@binary_string</span>
580:       <span class="ruby-keyword kw">end</span>
581:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000106" class="method-detail">
        <a name="M000106"></a>

        <div class="method-heading">
          <a href="#M000106" class="method-signature">
          <span class="method-name">get_usage_value</span><span class="method-args">(usage)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get the value of a particular usage, or return nil if it is not set in this
data packet
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000106-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000106-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 607</span>
607:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_usage_value</span>(<span class="ruby-identifier">usage</span>)
608:       <span class="ruby-identifier">set_usages</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
609:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">i</span>[<span class="ruby-value">1</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">usage</span>
610:       }
611:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
612:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000104" class="method-detail">
        <a name="M000104"></a>

        <div class="method-heading">
          <a href="#M000104" class="method-signature">
          <span class="method-name">report</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The report within the report descriptor that describes this data&#8217;s
formatting
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000104-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000104-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 585</span>
585:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">report</span>
586:       <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">report_id?</span>)
587:         <span class="ruby-ivar">@descriptor</span>.<span class="ruby-identifier">get_report</span>(<span class="ruby-identifier">report_id</span>)
588:       <span class="ruby-keyword kw">end</span>
589:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@descriptor</span>.<span class="ruby-identifier">reports</span>[<span class="ruby-value">0</span>]
590:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000102" class="method-detail">
        <a name="M000102"></a>

        <div class="method-heading">
          <a href="#M000102" class="method-signature">
          <span class="method-name">report_id</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Report_id for this packet
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000102-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000102-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 568</span>
568:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">report_id</span>
569:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">UsbException</span>, <span class="ruby-value str">&quot;Attempt to get report_id for a packet that did not have a report_id&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">report_id?</span>
570:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@binary_string</span>[<span class="ruby-value">0</span>,<span class="ruby-value">8</span>].<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-value">2</span>)
571:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000101" class="method-detail">
        <a name="M000101"></a>

        <div class="method-heading">
          <a href="#M000101" class="method-signature">
          <span class="method-name">report_id?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
True if this data packet was prefixed with a <a
href="ReportData.html#M000102">report_id</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000101-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000101-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 563</span>
563:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">report_id?</span>
564:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@descriptor</span>.<span class="ruby-identifier">uses_report_id?</span>
565:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000105" class="method-detail">
        <a name="M000105"></a>

        <div class="method-heading">
          <a href="#M000105" class="method-signature">
          <span class="method-name">set_usages</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of pairs [<a href="Usage.html">Usage</a>, value] containing
all the usages that are currently set in this report and thier values. Note
that this list contents can vary, based on the contents of array items in
the report
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000105-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000105-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 595</span>
595:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_usages</span>
596:       <span class="ruby-identifier">index</span> = <span class="ruby-value">0</span>
597:       <span class="ruby-identifier">result</span> = []
598:       <span class="ruby-identifier">report</span>.<span class="ruby-identifier">inputs</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">input</span><span class="ruby-operator">|</span>
599:         <span class="ruby-identifier">result</span> <span class="ruby-operator">|=</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">set_usages_for_data</span>(<span class="ruby-identifier">data_part</span>[<span class="ruby-identifier">index</span>, <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span>])
600:         <span class="ruby-identifier">index</span> = <span class="ruby-identifier">index</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span>
601:       }
602:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
603:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000108" class="method-detail">
        <a name="M000108"></a>

        <div class="method-heading">
          <a href="#M000108" class="method-signature">
          <span class="method-name">to_s</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000108-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000108-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 626</span>
626:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
627:       <span class="ruby-keyword kw">return</span> <span class="ruby-node">&quot;Report #{report_id? ? report_id : &quot;&quot;} data: [#{values.join(&quot;, &quot;)}]&quot;</span>
628:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000107" class="method-detail">
        <a name="M000107"></a>

        <div class="method-heading">
          <a href="#M000107" class="method-signature">
          <span class="method-name">values</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return an array corresponding to the integral values of the data retruned.
This can be useful for undertsanding a device&#8217;s format
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000107-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000107-source">
<pre>
     <span class="ruby-comment cmt"># File libusb.rb, line 616</span>
616:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">values</span>
617:       <span class="ruby-identifier">index</span> = <span class="ruby-value">0</span>
618:       <span class="ruby-identifier">result</span> = []
619:       <span class="ruby-identifier">report</span>.<span class="ruby-identifier">inputs</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">input</span><span class="ruby-operator">|</span>
620:         <span class="ruby-identifier">result</span> <span class="ruby-operator">|=</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">values_for_data</span>(<span class="ruby-identifier">data_part</span>[<span class="ruby-identifier">index</span>, <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span>])
621:         <span class="ruby-identifier">index</span> = <span class="ruby-identifier">index</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span>
622:       }
623:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
624:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>